<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>PrepareNmdBioticTable — PrepareNmdBioticTable • RstoxData</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="PrepareNmdBioticTable — PrepareNmdBioticTable"><meta property="og:description" content="Provides some standard flat tables for analysing NMDbiotic v 3.x data."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RstoxData</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.2.0-9006</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/imrdata.html">Working with IMR data</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/StoXProject/RstoxData/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>PrepareNmdBioticTable</h1>
    <small class="dont-index">Source: <a href="https://github.com/StoXProject/RstoxData/blob/master/R/Biotic.R" class="external-link"><code>R/Biotic.R</code></a></small>
    <div class="hidden name"><code>PrepareNmdBioticTable.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Provides some standard flat tables for analysing NMDbiotic v 3.x data.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">PrepareNmdBioticTable</span><span class="op">(</span></span>
<span>  <span class="va">BioticData</span>,</span>
<span>  TargetTable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Mission"</span>, <span class="st">"FishStation"</span>, <span class="st">"CatchSample"</span>, <span class="st">"Individual"</span>, <span class="st">"Prey"</span>,</span>
<span>    <span class="st">"MultipleTags"</span>, <span class="st">"MultipleReadings"</span>, <span class="st">"PreyLengthFrequencies"</span>,</span>
<span>    <span class="st">"PreyDevstageFrequencies"</span><span class="op">)</span>,</span>
<span>  addIds <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-bioticdata">BioticData<a class="anchor" aria-label="anchor" href="#arg-bioticdata"></a></dt>
<dd><p>A list of list of data.tables corresponding to the different levels of NMD-biotic as read for instance by <code><a href="ReadBiotic.html">ReadBiotic</a></code>.</p></dd>


<dt id="arg-targettable">TargetTable<a class="anchor" aria-label="anchor" href="#arg-targettable"></a></dt>
<dd><p>character with the name of the lowest table in the hierarchy to include.</p></dd>


<dt id="arg-addids">addIds<a class="anchor" aria-label="anchor" href="#arg-addids"></a></dt>
<dd><p>logical indicating whether to add convenient ids for the levels in NMDbiotic.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>a <code><a href="https://rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table</a></code> with columns as specified in the details section.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>NMDbiotic is a hierarchical data format with extendible reference lists, which is represented as a set of linked tables when red with <code><a href="ReadBiotic.html">ReadBiotic</a></code>.
This function provides some standard merges and concatenations of these tables in order to provide simpler views of the data that fits standard tools for analysis and plotting in R.
A detailed description of the format can be found at https://www.imr.no/formats/nmdbiotic/v3/. Note that this is not the same as the StoxBiotic-format.</p>
<p>Different tables are prepared as specified by the argument 'TargetTable':</p><dl><dt>Mission</dt>
<dd><p>The table 'mission'</p></dd>

<dt>FishStation</dt>
<dd><p>The table 'fishstaion', merged with 'mission'</p></dd>

<dt>CatchSample</dt>
<dd><p>The table 'catcsample', merged with 'fishstaton' and 'mission'</p></dd>

<dt>Individual</dt>
<dd><p>The table 'individual', merged with 'catchsample', 'fishstaton', 'mission', 'agedetermination' and 'tag'. Only the preferred age reading for each individual is kept from the table 'agedetermination' (see the field 'preferredagereading'). If an individual has multiple tags, a warning issued and no tags are added to the table for that individual.</p></dd>

<dt>Prey</dt>
<dd><p>The table 'prey', merged with individual', 'catchsample', 'fishstaton', 'mission' and 'agedetermination'. Only the preferred age reading for each individual is kept from the table 'agedetermination' (see the field 'preferredagereading')</p></dd>

<dt>MultipleTags</dt>
<dd><p>The table 'tag', merged with individual', 'catchsample', 'fishstaton', and 'mission.'</p></dd>

<dt>MultipleReadings</dt>
<dd><p>The table 'agedetermination', merged with 'individual', 'catchsample', 'fishstaton' and 'mission'</p></dd>

<dt>PreyLengthFrequencies</dt>
<dd><p>The table 'preylengthfrequencytable', merged with 'prey', 'individual', 'catchsample', 'fishstaton', 'mission' and 'agedetermination'. Only the preferred age reading for each individual is kept from the table 'agedetermination' (see the field 'preferredagereading')</p></dd>

<dt>PreyDevstageFrequencies</dt>
<dd><p>The table 'copepodedevstagefrequencytable', merged with 'prey', 'individual', 'catchsample', 'fishstaton', 'mission' and 'agedetermination'. Only the preferred age reading for each individual is kept from the table 'agedetermination' (see the field 'preferredagereading')</p></dd>


</dl><p>Table names above refer to fields in the detailed description of the nmdbiotic format (https://www.imr.no/formats/nmdbiotic/v3/).</p>
<p>Note that not all tables have corresponding registrations in lower tables. For instance a fishstation does not have to have any records on the individual-table.
Preparing e.g. the table 'Individual' will discard any stations or catches that does not contain records for in the individual-table.</p>
<p>If several age reading records are present for an individual, and the preferred age reading is not indicated in the data, the function will halt with an error.</p>
<p>The different levels in NMDbiotic are addressable by a combination of fields. The id for an individual for instance, is only guaranteed to be unique within the sample (catchsample) it belongs to.
Often it is convenient to construct identifiers that are unqiue across the entire data-set. This is provided by the argument 'addIds'. If 'addIds' is TRUE
the columns CruiseKey (identifying mission), Station (identifying station) and Fishstation (identifying fishstation or haul) are added in the same
manner that these fields are constructed when biotic data is converted to StoxBiotic (<code><a href="StoxBiotic.html">StoxBiotic</a></code>).
'FishStation' identifies station via serialnumber, which strictly speaking identifies a fishing operation,
but which is conventionally used to identify a station, since most stations have only one fishing operation.
'Station' is a similar unique identifier that identifies actual stations in data sets where the field 'station' is used to distinguish station from fishing operation.
In addition 'addIds' may add the columns 'CatchSample', 'Individual', 'Prey', 'Tag', 'AgeReading', 'PreyLengthBin', or 'PreyDevstageBin', which does not have a correspondance in StoxBiotic.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Arne Johannes Holmin, Anthony Hennessey, Charles Abraham Solberg, Sindre Vatnehol, Edvin Fuglebakk, Ibrahim Umar, Espen Johnsen, Norwegian Institute of Marine Research.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer></div>






  </body></html>

